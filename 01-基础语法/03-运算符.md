# 03-è¿ç®—ç¬¦

[â† è¿”å›æœ¬ç« ç›®å½•](./README.md) | [â† è¿”å›æ€»ç›®å½•](../README.md)

---

## ğŸ“‹ ç›®å½•

- [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
- [ç®—æœ¯è¿ç®—ç¬¦](#ç®—æœ¯è¿ç®—ç¬¦)
- [å…³ç³»è¿ç®—ç¬¦](#å…³ç³»è¿ç®—ç¬¦)
- [é€»è¾‘è¿ç®—ç¬¦](#é€»è¾‘è¿ç®—ç¬¦)
- [ä½è¿ç®—ç¬¦](#ä½è¿ç®—ç¬¦)
- [èµ‹å€¼è¿ç®—ç¬¦](#èµ‹å€¼è¿ç®—ç¬¦)
- [å…¶ä»–è¿ç®—ç¬¦](#å…¶ä»–è¿ç®—ç¬¦)
- [è¿ç®—ç¬¦ä¼˜å…ˆçº§](#è¿ç®—ç¬¦ä¼˜å…ˆçº§)
- [ä»£ç ç¤ºä¾‹](#ä»£ç ç¤ºä¾‹)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [é¢è¯•é¢˜](#é¢è¯•é¢˜)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å‚è€ƒèµ„æ–™](#å‚è€ƒèµ„æ–™)

---

## æ ¸å¿ƒæ¦‚å¿µ

Go è¯­è¨€çš„è¿ç®—ç¬¦åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š

```
1. ç®—æœ¯è¿ç®—ç¬¦ï¼š+, -, *, /, %, ++, --
2. å…³ç³»è¿ç®—ç¬¦ï¼š==, !=, <, <=, >, >=
3. é€»è¾‘è¿ç®—ç¬¦ï¼š&&, ||, !
4. ä½è¿ç®—ç¬¦ï¼š&, |, ^, <<, >>
5. èµ‹å€¼è¿ç®—ç¬¦ï¼š=, +=, -=, *=, /=, %=, &=, |=, ^=, <<=, >>=
6. å…¶ä»–è¿ç®—ç¬¦ï¼š&, *, <-, .
```

### Go è¿ç®—ç¬¦ç‰¹ç‚¹

- **æ²¡æœ‰ä¸‰å…ƒè¿ç®—ç¬¦** `? :`
- **++ å’Œ -- æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼**
- **ä½è¿ç®—ç¬¦åŠŸèƒ½å¼ºå¤§**
- **ç±»å‹å¿…é¡»åŒ¹é…**ï¼ˆä¸æ”¯æŒéšå¼è½¬æ¢ï¼‰

---

## ç®—æœ¯è¿ç®—ç¬¦

### 1. åŸºæœ¬ç®—æœ¯è¿ç®—

```go
package main

import "fmt"

func main() {
    a, b := 10, 3
    
    fmt.Println("åŠ æ³•:", a+b)    // 13
    fmt.Println("å‡æ³•:", a-b)    // 7
    fmt.Println("ä¹˜æ³•:", a*b)    // 30
    fmt.Println("é™¤æ³•:", a/b)    // 3 (æ•´æ•°é™¤æ³•)
    fmt.Println("å–æ¨¡:", a%b)    // 1
    
    // æµ®ç‚¹æ•°é™¤æ³•
    var x, y float64 = 10, 3
    fmt.Println("æµ®ç‚¹é™¤æ³•:", x/y)  // 3.3333333333333335
}
```

### 2. è‡ªå¢è‡ªå‡

```go
package main

import "fmt"

func main() {
    // ++ å’Œ -- æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼
    i := 1
    i++  // i = i + 1
    fmt.Println(i)  // 2
    
    i--  // i = i - 1
    fmt.Println(i)  // 1
    
    // åªæœ‰åç½®ï¼Œæ²¡æœ‰å‰ç½®
    // ++i  // ç¼–è¯‘é”™è¯¯
    // --i  // ç¼–è¯‘é”™è¯¯
    
    // ä¸èƒ½ç”¨åœ¨è¡¨è¾¾å¼ä¸­
    // j := i++  // ç¼–è¯‘é”™è¯¯
    // fmt.Println(i++)  // ç¼–è¯‘é”™è¯¯
}
```

### 3. æ•´æ•°æº¢å‡º

```go
package main

import (
    "fmt"
    "math"
)

func main() {
    // æ•´æ•°æº¢å‡ºä¼šå›ç»•
    var i int8 = 127
    i++
    fmt.Println(i)  // -128 (æº¢å‡º)
    
    var u uint8 = 255
    u++
    fmt.Println(u)  // 0 (æº¢å‡º)
    
    // ä½¿ç”¨ math åŒ…æ£€æŸ¥
    fmt.Println("int8 æœ€å¤§å€¼:", math.MaxInt8)
    fmt.Println("int8 æœ€å°å€¼:", math.MinInt8)
    fmt.Println("uint8 æœ€å¤§å€¼:", math.MaxUint8)
}
```

### 4. é™¤é›¶é”™è¯¯

```go
package main

import "fmt"

func main() {
    // æ•´æ•°é™¤é›¶ä¼š panic
    // fmt.Println(10 / 0)  // panic: integer divide by zero
    
    // æµ®ç‚¹æ•°é™¤é›¶ä¸ä¼š panic
    fmt.Println(10.0 / 0.0)  // +Inf
    fmt.Println(-10.0 / 0.0) // -Inf
    fmt.Println(0.0 / 0.0)   // NaN
}
```

---

## å…³ç³»è¿ç®—ç¬¦

### 1. æ¯”è¾ƒè¿ç®—ç¬¦

```go
package main

import "fmt"

func main() {
    a, b := 10, 20
    
    fmt.Println("a == b:", a == b)  // false
    fmt.Println("a != b:", a != b)  // true
    fmt.Println("a < b:", a < b)    // true
    fmt.Println("a <= b:", a <= b)  // true
    fmt.Println("a > b:", a > b)    // false
    fmt.Println("a >= b:", a >= b)  // false
}
```

### 2. å­—ç¬¦ä¸²æ¯”è¾ƒ

```go
package main

import "fmt"

func main() {
    s1, s2 := "abc", "abd"
    
    // å­—ç¬¦ä¸²æŒ‰å­—å…¸åºæ¯”è¾ƒ
    fmt.Println("s1 == s2:", s1 == s2)  // false
    fmt.Println("s1 < s2:", s1 < s2)    // true
    fmt.Println("s1 > s2:", s1 > s2)    // false
}
```

### 3. æ•°ç»„æ¯”è¾ƒ

```go
package main

import "fmt"

func main() {
    // æ•°ç»„å¯ä»¥æ¯”è¾ƒï¼ˆå…ƒç´ ç±»å‹å¯æ¯”è¾ƒï¼‰
    arr1 := [3]int{1, 2, 3}
    arr2 := [3]int{1, 2, 3}
    arr3 := [3]int{1, 2, 4}
    
    fmt.Println("arr1 == arr2:", arr1 == arr2)  // true
    fmt.Println("arr1 == arr3:", arr1 == arr3)  // false
    
    // åˆ‡ç‰‡ä¸èƒ½æ¯”è¾ƒï¼ˆåªèƒ½ä¸ nil æ¯”è¾ƒï¼‰
    slice1 := []int{1, 2, 3}
    // fmt.Println(slice1 == slice2)  // ç¼–è¯‘é”™è¯¯
    fmt.Println("slice1 == nil:", slice1 == nil)  // false
}
```

### 4. ç»“æ„ä½“æ¯”è¾ƒ

```go
package main

import "fmt"

type Point struct {
    X, Y int
}

func main() {
    p1 := Point{1, 2}
    p2 := Point{1, 2}
    p3 := Point{2, 3}
    
    // ç»“æ„ä½“å¯ä»¥æ¯”è¾ƒï¼ˆæ‰€æœ‰å­—æ®µå¯æ¯”è¾ƒï¼‰
    fmt.Println("p1 == p2:", p1 == p2)  // true
    fmt.Println("p1 == p3:", p1 == p3)  // false
}
```

---

## é€»è¾‘è¿ç®—ç¬¦

### 1. é€»è¾‘ä¸ã€æˆ–ã€é

```go
package main

import "fmt"

func main() {
    a, b := true, false
    
    fmt.Println("a && b:", a && b)  // false
    fmt.Println("a || b:", a || b)  // true
    fmt.Println("!a:", !a)          // false
    fmt.Println("!b:", !b)          // true
}
```

### 2. çŸ­è·¯æ±‚å€¼

```go
package main

import "fmt"

func isPositive(x int) bool {
    fmt.Println("æ£€æŸ¥", x)
    return x > 0
}

func main() {
    // && çŸ­è·¯ï¼šå·¦è¾¹ä¸º falseï¼Œå³è¾¹ä¸æ‰§è¡Œ
    fmt.Println("=== && çŸ­è·¯ ===")
    result1 := isPositive(-1) && isPositive(1)
    fmt.Println("ç»“æœ:", result1)
    // è¾“å‡ºï¼š
    // æ£€æŸ¥ -1
    // ç»“æœ: false
    
    // || çŸ­è·¯ï¼šå·¦è¾¹ä¸º trueï¼Œå³è¾¹ä¸æ‰§è¡Œ
    fmt.Println("\n=== || çŸ­è·¯ ===")
    result2 := isPositive(1) || isPositive(-1)
    fmt.Println("ç»“æœ:", result2)
    // è¾“å‡ºï¼š
    // æ£€æŸ¥ 1
    // ç»“æœ: true
}
```

### 3. é€»è¾‘è¿ç®—ä¼˜å…ˆçº§

```go
package main

import "fmt"

func main() {
    // ! > && > ||
    a, b, c := true, false, true
    
    result := a || b && c
    fmt.Println(result)  // true
    // ç­‰ä»·äº: a || (b && c)
    
    result2 := (a || b) && c
    fmt.Println(result2)  // true
}
```

---

## ä½è¿ç®—ç¬¦

### 1. æŒ‰ä½ä¸ã€æˆ–ã€å¼‚æˆ–

```go
package main

import "fmt"

func main() {
    a, b := 12, 10  // 1100, 1010
    
    fmt.Printf("a:     %04b (%d)\n", a, a)
    fmt.Printf("b:     %04b (%d)\n", b, b)
    fmt.Printf("a & b: %04b (%d)\n", a&b, a&b)   // 1000 (8)
    fmt.Printf("a | b: %04b (%d)\n", a|b, a|b)   // 1110 (14)
    fmt.Printf("a ^ b: %04b (%d)\n", a^b, a^b)   // 0110 (6)
}
```

### 2. æŒ‰ä½å–å

```go
package main

import "fmt"

func main() {
    a := 12  // 0000 1100
    
    fmt.Printf("a:  %08b (%d)\n", uint8(a), a)
    fmt.Printf("^a: %08b (%d)\n", uint8(^a), ^a)
    // ^a: 11110011 (-13)
    
    // å¯¹äºæ— ç¬¦å·æ•°
    var u uint8 = 12
    fmt.Printf("u:  %08b (%d)\n", u, u)
    fmt.Printf("^u: %08b (%d)\n", ^u, ^u)
    // ^u: 11110011 (243)
}
```

### 3. å·¦ç§»å’Œå³ç§»

```go
package main

import "fmt"

func main() {
    a := 8  // 1000
    
    fmt.Printf("a:      %04b (%d)\n", a, a)
    fmt.Printf("a << 1: %04b (%d)\n", a<<1, a<<1)  // 10000 (16)
    fmt.Printf("a << 2: %04b (%d)\n", a<<2, a<<2)  // 100000 (32)
    fmt.Printf("a >> 1: %04b (%d)\n", a>>1, a>>1)  // 100 (4)
    fmt.Printf("a >> 2: %04b (%d)\n", a>>2, a>>2)  // 10 (2)
    
    // å·¦ç§» n ä½ = ä¹˜ä»¥ 2^n
    // å³ç§» n ä½ = é™¤ä»¥ 2^n
}
```

### 4. ä½è¿ç®—åº”ç”¨

```go
package main

import "fmt"

func main() {
    // 1. åˆ¤æ–­å¥‡å¶
    n := 15
    if n&1 == 1 {
        fmt.Println(n, "æ˜¯å¥‡æ•°")
    }
    
    // 2. äº¤æ¢ä¸¤ä¸ªæ•°ï¼ˆä¸ç”¨ä¸´æ—¶å˜é‡ï¼‰
    a, b := 10, 20
    fmt.Printf("äº¤æ¢å‰: a=%d, b=%d\n", a, b)
    a = a ^ b
    b = a ^ b
    a = a ^ b
    fmt.Printf("äº¤æ¢å: a=%d, b=%d\n", a, b)
    
    // 3. è·å–æœ€ä½ä½çš„ 1
    x := 12  // 1100
    fmt.Printf("x:           %04b\n", x)
    fmt.Printf("x & -x:      %04b (%d)\n", x&-x, x&-x)  // 0100 (4)
    
    // 4. æ¸…é™¤æœ€ä½ä½çš„ 1
    fmt.Printf("x & (x-1):   %04b (%d)\n", x&(x-1), x&(x-1))  // 1000 (8)
}
```

### 5. ä½æ ‡å¿—ï¼ˆFlagsï¼‰

```go
package main

import "fmt"

const (
    FlagRead   = 1 << iota  // 0001
    FlagWrite               // 0010
    FlagExecute             // 0100
    FlagDelete              // 1000
)

func main() {
    // è®¾ç½®æƒé™
    var permission uint = 0
    
    // æ·»åŠ æƒé™
    permission |= FlagRead
    permission |= FlagWrite
    fmt.Printf("æƒé™: %04b\n", permission)  // 0011
    
    // æ£€æŸ¥æƒé™
    if permission&FlagRead != 0 {
        fmt.Println("æœ‰è¯»æƒé™")
    }
    
    // ç§»é™¤æƒé™
    permission &^= FlagWrite  // æ¸…é™¤å†™æƒé™
    fmt.Printf("æƒé™: %04b\n", permission)  // 0001
    
    // åˆ‡æ¢æƒé™
    permission ^= FlagExecute
    fmt.Printf("æƒé™: %04b\n", permission)  // 0101
}
```

---

## èµ‹å€¼è¿ç®—ç¬¦

### 1. åŸºæœ¬èµ‹å€¼

```go
package main

import "fmt"

func main() {
    // ç®€å•èµ‹å€¼
    var a int
    a = 10
    fmt.Println(a)
    
    // å¤šé‡èµ‹å€¼
    var x, y int
    x, y = 1, 2
    fmt.Println(x, y)
    
    // äº¤æ¢å˜é‡
    x, y = y, x
    fmt.Println(x, y)
}
```

### 2. å¤åˆèµ‹å€¼

```go
package main

import "fmt"

func main() {
    a := 10
    
    a += 5   // a = a + 5
    fmt.Println(a)  // 15
    
    a -= 3   // a = a - 3
    fmt.Println(a)  // 12
    
    a *= 2   // a = a * 2
    fmt.Println(a)  // 24
    
    a /= 4   // a = a / 4
    fmt.Println(a)  // 6
    
    a %= 4   // a = a % 4
    fmt.Println(a)  // 2
    
    // ä½è¿ç®—èµ‹å€¼
    b := 12  // 1100
    b &= 10  // b = b & 10 (1010) = 1000 (8)
    fmt.Println(b)
    
    b |= 5   // b = b | 5 (0101) = 1101 (13)
    fmt.Println(b)
    
    b ^= 3   // b = b ^ 3 (0011) = 1110 (14)
    fmt.Println(b)
    
    b <<= 1  // b = b << 1 = 11100 (28)
    fmt.Println(b)
    
    b >>= 2  // b = b >> 2 = 111 (7)
    fmt.Println(b)
}
```

---

## å…¶ä»–è¿ç®—ç¬¦

### 1. å–åœ°å€å’Œè§£å¼•ç”¨

```go
package main

import "fmt"

func main() {
    a := 10
    
    // & å–åœ°å€
    p := &a
    fmt.Printf("a çš„åœ°å€: %p\n", p)
    
    // * è§£å¼•ç”¨
    fmt.Println("p æŒ‡å‘çš„å€¼:", *p)
    
    // é€šè¿‡æŒ‡é’ˆä¿®æ”¹å€¼
    *p = 20
    fmt.Println("a:", a)  // 20
}
```

### 2. é€šé“æ“ä½œç¬¦

```go
package main

import "fmt"

func main() {
    // <- ç”¨äºé€šé“æ“ä½œ
    ch := make(chan int, 1)
    
    // å‘é€æ•°æ®
    ch <- 10
    
    // æ¥æ”¶æ•°æ®
    value := <-ch
    fmt.Println(value)
}
```

### 3. æˆå‘˜è®¿é—®

```go
package main

import "fmt"

type Person struct {
    Name string
    Age  int
}

func main() {
    p := Person{"Alice", 25}
    
    // . è®¿é—®ç»“æ„ä½“å­—æ®µ
    fmt.Println(p.Name)
    fmt.Println(p.Age)
    
    // æŒ‡é’ˆè‡ªåŠ¨è§£å¼•ç”¨
    ptr := &p
    fmt.Println(ptr.Name)  // ç­‰ä»·äº (*ptr).Name
}
```

---

## è¿ç®—ç¬¦ä¼˜å…ˆçº§

ä»é«˜åˆ°ä½ï¼š

```go
ä¼˜å…ˆçº§ 5ï¼ˆæœ€é«˜ï¼‰:  *  /  %  <<  >>  &  &^
ä¼˜å…ˆçº§ 4:         +  -  |  ^
ä¼˜å…ˆçº§ 3:         ==  !=  <  <=  >  >=
ä¼˜å…ˆçº§ 2:         &&
ä¼˜å…ˆçº§ 1ï¼ˆæœ€ä½ï¼‰:  ||
```

### ç¤ºä¾‹

```go
package main

import "fmt"

func main() {
    // ç¤ºä¾‹ 1
    result := 2 + 3 * 4
    fmt.Println(result)  // 14 (ä¸æ˜¯ 20)
    
    // ç¤ºä¾‹ 2
    result2 := 10 > 5 && 3 < 7
    fmt.Println(result2)  // true
    
    // ç¤ºä¾‹ 3
    result3 := 1 << 2 + 3
    fmt.Println(result3)  // 32 (ç­‰ä»·äº 1 << (2+3))
    
    // ä½¿ç”¨æ‹¬å·æ˜ç¡®ä¼˜å…ˆçº§
    result4 := (1 << 2) + 3
    fmt.Println(result4)  // 7
}
```

---

## ä»£ç ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šè®¡ç®—å™¨

```go
package main

import "fmt"

func calculate(a, b int, op string) int {
    switch op {
    case "+":
        return a + b
    case "-":
        return a - b
    case "*":
        return a * b
    case "/":
        if b == 0 {
            panic("é™¤æ•°ä¸èƒ½ä¸º 0")
        }
        return a / b
    case "%":
        if b == 0 {
            panic("é™¤æ•°ä¸èƒ½ä¸º 0")
        }
        return a % b
    default:
        panic("ä¸æ”¯æŒçš„è¿ç®—ç¬¦")
    }
}

func main() {
    fmt.Println("10 + 5 =", calculate(10, 5, "+"))
    fmt.Println("10 - 5 =", calculate(10, 5, "-"))
    fmt.Println("10 * 5 =", calculate(10, 5, "*"))
    fmt.Println("10 / 5 =", calculate(10, 5, "/"))
    fmt.Println("10 % 3 =", calculate(10, 3, "%"))
}
```

### ç¤ºä¾‹ 2ï¼šä½è¿ç®—åº”ç”¨

```go
package main

import "fmt"

// åˆ¤æ–­æ˜¯å¦ä¸º 2 çš„å¹‚
func isPowerOfTwo(n int) bool {
    return n > 0 && (n&(n-1)) == 0
}

// ç»Ÿè®¡äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•°
func countOnes(n int) int {
    count := 0
    for n > 0 {
        n &= n - 1  // æ¸…é™¤æœ€ä½ä½çš„ 1
        count++
    }
    return count
}

// åè½¬äºŒè¿›åˆ¶ä½
func reverseBits(n uint32) uint32 {
    var result uint32
    for i := 0; i < 32; i++ {
        result <<= 1
        result |= n & 1
        n >>= 1
    }
    return result
}

func main() {
    fmt.Println("8 æ˜¯ 2 çš„å¹‚:", isPowerOfTwo(8))    // true
    fmt.Println("10 æ˜¯ 2 çš„å¹‚:", isPowerOfTwo(10))  // false
    
    fmt.Println("15 çš„äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•°:", countOnes(15))  // 4
    
    fmt.Printf("åè½¬ %032b\n", uint32(12))
    fmt.Printf("ç»“æœ %032b\n", reverseBits(12))
}
```

### ç¤ºä¾‹ 3ï¼šæƒé™ç®¡ç†

```go
package main

import "fmt"

const (
    PermRead   = 1 << iota  // 001
    PermWrite               // 010
    PermExecute             // 100
)

type User struct {
    Name        string
    Permissions uint
}

func (u *User) GrantPermission(perm uint) {
    u.Permissions |= perm
}

func (u *User) RevokePermission(perm uint) {
    u.Permissions &^= perm
}

func (u *User) HasPermission(perm uint) bool {
    return u.Permissions&perm != 0
}

func (u *User) PrintPermissions() {
    fmt.Printf("%s çš„æƒé™: ", u.Name)
    if u.HasPermission(PermRead) {
        fmt.Print("è¯» ")
    }
    if u.HasPermission(PermWrite) {
        fmt.Print("å†™ ")
    }
    if u.HasPermission(PermExecute) {
        fmt.Print("æ‰§è¡Œ ")
    }
    fmt.Println()
}

func main() {
    user := &User{Name: "Alice"}
    
    // æˆäºˆæƒé™
    user.GrantPermission(PermRead)
    user.GrantPermission(PermWrite)
    user.PrintPermissions()
    
    // æ£€æŸ¥æƒé™
    fmt.Println("æœ‰è¯»æƒé™:", user.HasPermission(PermRead))
    
    // æ’¤é”€æƒé™
    user.RevokePermission(PermWrite)
    user.PrintPermissions()
}
```

---

## å¸¸è§é—®é¢˜

### 1. ä¸ºä»€ä¹ˆ Go æ²¡æœ‰ä¸‰å…ƒè¿ç®—ç¬¦ï¼Ÿ

```go
// Go æ²¡æœ‰ä¸‰å…ƒè¿ç®—ç¬¦ ? :
// åŸå› ï¼šä¿æŒè¯­è¨€ç®€æ´ï¼Œé¿å…æ»¥ç”¨

// å…¶ä»–è¯­è¨€
// result = condition ? value1 : value2

// Go çš„åšæ³•
var result int
if condition {
    result = value1
} else {
    result = value2
}
```

### 2. ++ å’Œ -- ä¸ºä»€ä¹ˆä¸èƒ½ç”¨åœ¨è¡¨è¾¾å¼ä¸­ï¼Ÿ

```go
// Go ä¸­ ++ å’Œ -- æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼
i := 1
i++  // âœ…

// ä»¥ä¸‹éƒ½æ˜¯é”™è¯¯çš„
// j := i++     // âŒ
// fmt.Println(i++)  // âŒ
// if i++ > 0 {}     // âŒ

// åŸå› ï¼šé¿å… C/C++ ä¸­çš„æ··æ·†
// C: i++ vs ++i çš„åŒºåˆ«
```

### 3. æ•´æ•°é™¤æ³•çš„é™·é˜±

```go
// æ•´æ•°é™¤æ³•ä¼šæˆªæ–­
a := 5 / 2
fmt.Println(a)  // 2 (ä¸æ˜¯ 2.5)

// æ­£ç¡®åšæ³•
b := float64(5) / float64(2)
fmt.Println(b)  // 2.5
```

### 4. ä½è¿ç®—çš„ç¬¦å·é—®é¢˜

```go
// æœ‰ç¬¦å·æ•°çš„å³ç§»æ˜¯ç®—æœ¯å³ç§»ï¼ˆä¿ç•™ç¬¦å·ä½ï¼‰
a := -8  // 11111000
fmt.Println(a >> 1)  // -4 (11111100)

// æ— ç¬¦å·æ•°çš„å³ç§»æ˜¯é€»è¾‘å³ç§»ï¼ˆè¡¥ 0ï¼‰
var b uint8 = 248  // 11111000
fmt.Println(b >> 1)  // 124 (01111100)
```

---

## é¢è¯•é¢˜

### 1. ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ

```go
package main

import "fmt"

func main() {
    a := 1
    b := 2
    c := a + b * 3
    fmt.Println(c)
}
```

**ç­”æ¡ˆï¼š** 7

**è§£æï¼š** ä¹˜æ³•ä¼˜å…ˆçº§é«˜äºåŠ æ³•ï¼Œæ‰€ä»¥æ˜¯ `a + (b * 3) = 1 + 6 = 7`

### 2. å¦‚ä½•ä¸ç”¨ä¸´æ—¶å˜é‡äº¤æ¢ä¸¤ä¸ªæ•°ï¼Ÿ

**ç­”æ¡ˆï¼š**

```go
// æ–¹æ³• 1ï¼šä½¿ç”¨å¤šé‡èµ‹å€¼ï¼ˆæ¨èï¼‰
a, b = b, a

// æ–¹æ³• 2ï¼šä½¿ç”¨å¼‚æˆ–
a = a ^ b
b = a ^ b
a = a ^ b

// æ–¹æ³• 3ï¼šä½¿ç”¨åŠ å‡
a = a + b
b = a - b
a = a - b
```

### 3. ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ

```go
package main

import "fmt"

func main() {
    var a int8 = 127
    a++
    fmt.Println(a)
}
```

**ç­”æ¡ˆï¼š** -128

**è§£æï¼š** int8 çš„èŒƒå›´æ˜¯ -128 åˆ° 127ï¼Œ127 + 1 æº¢å‡ºå˜æˆ -128

### 4. å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦ä¸º 2 çš„å¹‚ï¼Ÿ

**ç­”æ¡ˆï¼š**

```go
func isPowerOfTwo(n int) bool {
    return n > 0 && (n & (n-1)) == 0
}

// åŸç†ï¼š
// 2 çš„å¹‚çš„äºŒè¿›åˆ¶åªæœ‰ä¸€ä¸ª 1
// 8:  1000
// 7:  0111
// 8&7: 0000
```

### 5. ä½è¿ç®— &^ æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

**ç­”æ¡ˆï¼š**

`&^` æ˜¯ä½æ¸…é™¤è¿ç®—ç¬¦ï¼ˆbit clearï¼‰ï¼Œ`a &^ b` è¡¨ç¤ºæ¸…é™¤ a ä¸­åœ¨ b ä¸­ä¸º 1 çš„ä½ã€‚

```go
a := 12  // 1100
b := 10  // 1010
c := a &^ b  // 0100 (4)

// ç­‰ä»·äº
c := a & (^b)
```

**åº”ç”¨ï¼š** æ¸…é™¤æ ‡å¿—ä½

```go
permission := PermRead | PermWrite  // 011
permission &^= PermWrite            // 001 (æ¸…é™¤å†™æƒé™)
```

---

## æœ€ä½³å®è·µ

### 1. ä½¿ç”¨æ‹¬å·æ˜ç¡®ä¼˜å…ˆçº§

```go
// âœ… æ¨è
result := (a + b) * c

// âŒ ä¸æ¨èï¼ˆä¾èµ–ä¼˜å…ˆçº§è®°å¿†ï¼‰
result := a + b * c
```

### 2. é¿å…å¤æ‚çš„ä½è¿ç®—è¡¨è¾¾å¼

```go
// âœ… æ¨è
mask := 0xFF
value := data & mask

// âŒ ä¸æ¨è
value := data & 0xFF | (data >> 8) & 0xFF << 8
```

### 3. ä½¿ç”¨å¸¸é‡å®šä¹‰ä½æ ‡å¿—

```go
// âœ… æ¨è
const (
    FlagRead = 1 << iota
    FlagWrite
    FlagExecute
)

// âŒ ä¸æ¨è
const FlagRead = 1
const FlagWrite = 2
const FlagExecute = 4
```

### 4. æ£€æŸ¥é™¤é›¶

```go
// âœ… æ¨è
if b != 0 {
    result := a / b
}

// âŒ ä¸æ¨èï¼ˆå¯èƒ½ panicï¼‰
result := a / b
```

### 5. ä½¿ç”¨ä½è¿ç®—ä¼˜åŒ–æ€§èƒ½

```go
// åˆ¤æ–­å¥‡å¶
// âœ… å¿«
if n & 1 == 1 {
    // å¥‡æ•°
}

// âŒ æ…¢
if n % 2 == 1 {
    // å¥‡æ•°
}

// ä¹˜ä»¥ 2 çš„å¹‚
// âœ… å¿«
result := n << 3  // n * 8

// âŒ æ…¢
result := n * 8
```

---

## å‚è€ƒèµ„æ–™

- [x] [Go å®˜æ–¹æ–‡æ¡£ - Operators](https://go.dev/ref/spec#Operators)
- [x] [Go å®˜æ–¹æ–‡æ¡£ - Operator precedence](https://go.dev/ref/spec#Operator_precedence)
- [x] [Effective Go - Operators](https://go.dev/doc/effective_go)
- [x] [Go by Example - Operators](https://gobyexample.com/)
- [x] [ä½è¿ç®—æŠ€å·§](https://graphics.stanford.edu/~seander/bithacks.html)

---

**ä¸‹ä¸€èŠ‚ï¼š** [04-æµç¨‹æ§åˆ¶](./04-æµç¨‹æ§åˆ¶.md)
