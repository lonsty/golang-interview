# 04-æµç¨‹æ§åˆ¶

[â† è¿”å›æœ¬ç« ç›®å½•](./README.md) | [â† è¿”å›æ€»ç›®å½•](../README.md)

---

## ğŸ“‹ ç›®å½•

- [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
- [if æ¡ä»¶è¯­å¥](#if-æ¡ä»¶è¯­å¥)
- [switch åˆ†æ”¯è¯­å¥](#switch-åˆ†æ”¯è¯­å¥)
- [for å¾ªç¯è¯­å¥](#for-å¾ªç¯è¯­å¥)
- [goto è·³è½¬è¯­å¥](#goto-è·³è½¬è¯­å¥)
- [defer å»¶è¿Ÿè¯­å¥](#defer-å»¶è¿Ÿè¯­å¥)
- [ä»£ç ç¤ºä¾‹](#ä»£ç ç¤ºä¾‹)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [é¢è¯•é¢˜](#é¢è¯•é¢˜)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å‚è€ƒèµ„æ–™](#å‚è€ƒèµ„æ–™)

---

## æ ¸å¿ƒæ¦‚å¿µ

Go è¯­è¨€çš„æµç¨‹æ§åˆ¶è¯­å¥ï¼š

```
1. if/else     - æ¡ä»¶åˆ¤æ–­
2. switch/case - å¤šåˆ†æ”¯é€‰æ‹©
3. for         - å¾ªç¯ï¼ˆå”¯ä¸€çš„å¾ªç¯è¯­å¥ï¼‰
4. goto        - æ— æ¡ä»¶è·³è½¬
5. defer       - å»¶è¿Ÿæ‰§è¡Œ
6. break       - è·³å‡ºå¾ªç¯/switch
7. continue    - ç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯
8. fallthrough - switch ç©¿é€
```

### Go æµç¨‹æ§åˆ¶ç‰¹ç‚¹

- **æ²¡æœ‰ while å’Œ do-while**ï¼ˆç”¨ for ä»£æ›¿ï¼‰
- **æ²¡æœ‰ä¸‰å…ƒè¿ç®—ç¬¦**ï¼ˆç”¨ if-else ä»£æ›¿ï¼‰
- **æ¡ä»¶è¡¨è¾¾å¼ä¸éœ€è¦æ‹¬å·**
- **switch ä¸éœ€è¦ break**ï¼ˆé»˜è®¤ä¸ç©¿é€ï¼‰
- **æ”¯æŒæ ‡ç­¾è·³è½¬**

---

## if æ¡ä»¶è¯­å¥

### 1. åŸºæœ¬ if è¯­å¥

```go
package main

import "fmt"

func main() {
    age := 18
    
    // åŸºæœ¬ if
    if age >= 18 {
        fmt.Println("æˆå¹´äºº")
    }
    
    // if-else
    if age >= 18 {
        fmt.Println("æˆå¹´äºº")
    } else {
        fmt.Println("æœªæˆå¹´äºº")
    }
    
    // if-else if-else
    score := 85
    if score >= 90 {
        fmt.Println("ä¼˜ç§€")
    } else if score >= 80 {
        fmt.Println("è‰¯å¥½")
    } else if score >= 60 {
        fmt.Println("åŠæ ¼")
    } else {
        fmt.Println("ä¸åŠæ ¼")
    }
}
```

### 2. if ç®€çŸ­è¯­å¥

```go
package main

import "fmt"

func main() {
    // if å¯ä»¥åŒ…å«åˆå§‹åŒ–è¯­å¥
    if age := 20; age >= 18 {
        fmt.Println("æˆå¹´äººï¼Œå¹´é¾„:", age)
    }
    // age åœ¨è¿™é‡Œä¸å¯è§
    
    // å¸¸ç”¨äºé”™è¯¯å¤„ç†
    if err := doSomething(); err != nil {
        fmt.Println("é”™è¯¯:", err)
        return
    }
    
    // å¸¸ç”¨äºç±»å‹æ–­è¨€
    if value, ok := m["key"]; ok {
        fmt.Println("æ‰¾åˆ°å€¼:", value)
    }
}

func doSomething() error {
    return nil
}
```

### 3. æ¡ä»¶è¡¨è¾¾å¼

```go
package main

import "fmt"

func main() {
    x := 10
    
    // æ¡ä»¶ä¸éœ€è¦æ‹¬å·
    if x > 5 {
        fmt.Println("x > 5")
    }
    
    // ä½†å¯ä»¥ç”¨æ‹¬å·æ˜ç¡®ä¼˜å…ˆçº§
    if (x > 5) && (x < 15) {
        fmt.Println("5 < x < 15")
    }
    
    // æ¡ä»¶å¿…é¡»æ˜¯å¸ƒå°”å€¼
    // if x {  // ç¼–è¯‘é”™è¯¯
    //     fmt.Println("x")
    // }
    
    // æ­£ç¡®åšæ³•
    if x != 0 {
        fmt.Println("x ä¸ä¸º 0")
    }
}
```

---

## switch åˆ†æ”¯è¯­å¥

### 1. åŸºæœ¬ switch

```go
package main

import "fmt"

func main() {
    day := 3
    
    switch day {
    case 1:
        fmt.Println("æ˜ŸæœŸä¸€")
    case 2:
        fmt.Println("æ˜ŸæœŸäºŒ")
    case 3:
        fmt.Println("æ˜ŸæœŸä¸‰")
    case 4:
        fmt.Println("æ˜ŸæœŸå››")
    case 5:
        fmt.Println("æ˜ŸæœŸäº”")
    case 6, 7:  // å¤šä¸ªå€¼
        fmt.Println("å‘¨æœ«")
    default:
        fmt.Println("æ— æ•ˆçš„æ—¥æœŸ")
    }
}
```

### 2. switch ç®€çŸ­è¯­å¥

```go
package main

import "fmt"

func main() {
    // switch å¯ä»¥åŒ…å«åˆå§‹åŒ–è¯­å¥
    switch day := 3; day {
    case 1, 2, 3, 4, 5:
        fmt.Println("å·¥ä½œæ—¥")
    case 6, 7:
        fmt.Println("å‘¨æœ«")
    }
}
```

### 3. æ— è¡¨è¾¾å¼ switch

```go
package main

import "fmt"

func main() {
    score := 85
    
    // ç›¸å½“äº if-else if-else
    switch {
    case score >= 90:
        fmt.Println("ä¼˜ç§€")
    case score >= 80:
        fmt.Println("è‰¯å¥½")
    case score >= 60:
        fmt.Println("åŠæ ¼")
    default:
        fmt.Println("ä¸åŠæ ¼")
    }
}
```

### 4. fallthrough ç©¿é€

```go
package main

import "fmt"

func main() {
    num := 2
    
    switch num {
    case 1:
        fmt.Println("1")
        fallthrough  // ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª case
    case 2:
        fmt.Println("2")
        fallthrough
    case 3:
        fmt.Println("3")
    case 4:
        fmt.Println("4")
    }
    // è¾“å‡ºï¼š
    // 2
    // 3
}
```

### 5. ç±»å‹ switch

```go
package main

import "fmt"

func printType(i interface{}) {
    switch v := i.(type) {
    case int:
        fmt.Printf("æ•´æ•°: %d\n", v)
    case string:
        fmt.Printf("å­—ç¬¦ä¸²: %s\n", v)
    case bool:
        fmt.Printf("å¸ƒå°”: %t\n", v)
    case []int:
        fmt.Printf("æ•´æ•°åˆ‡ç‰‡: %v\n", v)
    default:
        fmt.Printf("æœªçŸ¥ç±»å‹: %T\n", v)
    }
}

func main() {
    printType(42)
    printType("hello")
    printType(true)
    printType([]int{1, 2, 3})
    printType(3.14)
}
```

---

## for å¾ªç¯è¯­å¥

### 1. åŸºæœ¬ for å¾ªç¯

```go
package main

import "fmt"

func main() {
    // æ ‡å‡† for å¾ªç¯
    for i := 0; i < 5; i++ {
        fmt.Println(i)
    }
    
    // çœç•¥åˆå§‹åŒ–è¯­å¥
    j := 0
    for ; j < 5; j++ {
        fmt.Println(j)
    }
    
    // çœç•¥åç½®è¯­å¥
    k := 0
    for k < 5 {
        fmt.Println(k)
        k++
    }
}
```

### 2. while é£æ ¼å¾ªç¯

```go
package main

import "fmt"

func main() {
    // Go æ²¡æœ‰ whileï¼Œç”¨ for ä»£æ›¿
    i := 0
    for i < 5 {
        fmt.Println(i)
        i++
    }
}
```

### 3. æ— é™å¾ªç¯

```go
package main

import (
    "fmt"
    "time"
)

func main() {
    // æ— é™å¾ªç¯
    count := 0
    for {
        fmt.Println("å¾ªç¯", count)
        count++
        
        if count >= 5 {
            break  // è·³å‡ºå¾ªç¯
        }
        
        time.Sleep(time.Second)
    }
}
```

### 4. for-range å¾ªç¯

```go
package main

import "fmt"

func main() {
    // éå†æ•°ç»„/åˆ‡ç‰‡
    nums := []int{10, 20, 30, 40, 50}
    
    // ç´¢å¼•å’Œå€¼
    for i, v := range nums {
        fmt.Printf("nums[%d] = %d\n", i, v)
    }
    
    // åªè¦ç´¢å¼•
    for i := range nums {
        fmt.Println("ç´¢å¼•:", i)
    }
    
    // åªè¦å€¼
    for _, v := range nums {
        fmt.Println("å€¼:", v)
    }
    
    // éå†å­—ç¬¦ä¸²
    str := "Hello, ä¸–ç•Œ"
    for i, r := range str {
        fmt.Printf("ç´¢å¼• %d: %c\n", i, r)
    }
    
    // éå† map
    m := map[string]int{
        "apple":  1,
        "banana": 2,
        "orange": 3,
    }
    for k, v := range m {
        fmt.Printf("%s: %d\n", k, v)
    }
    
    // éå†é€šé“
    ch := make(chan int, 3)
    ch <- 1
    ch <- 2
    ch <- 3
    close(ch)
    
    for v := range ch {
        fmt.Println("æ¥æ”¶:", v)
    }
}
```

### 5. break å’Œ continue

```go
package main

import "fmt"

func main() {
    // breakï¼šè·³å‡ºå¾ªç¯
    for i := 0; i < 10; i++ {
        if i == 5 {
            break
        }
        fmt.Println(i)
    }
    // è¾“å‡ºï¼š0 1 2 3 4
    
    fmt.Println("---")
    
    // continueï¼šè·³è¿‡æœ¬æ¬¡å¾ªç¯
    for i := 0; i < 10; i++ {
        if i%2 == 0 {
            continue
        }
        fmt.Println(i)
    }
    // è¾“å‡ºï¼š1 3 5 7 9
}
```

### 6. æ ‡ç­¾è·³è½¬

```go
package main

import "fmt"

func main() {
    // å¤–å±‚å¾ªç¯æ ‡ç­¾
OuterLoop:
    for i := 0; i < 3; i++ {
        for j := 0; j < 3; j++ {
            fmt.Printf("i=%d, j=%d\n", i, j)
            
            if i == 1 && j == 1 {
                break OuterLoop  // è·³å‡ºå¤–å±‚å¾ªç¯
            }
        }
    }
    
    fmt.Println("---")
    
    // continue æ ‡ç­¾
OuterLoop2:
    for i := 0; i < 3; i++ {
        for j := 0; j < 3; j++ {
            if j == 1 {
                continue OuterLoop2  // ç»§ç»­å¤–å±‚å¾ªç¯
            }
            fmt.Printf("i=%d, j=%d\n", i, j)
        }
    }
}
```

---

## goto è·³è½¬è¯­å¥

### 1. åŸºæœ¬ goto

```go
package main

import "fmt"

func main() {
    i := 0
    
Start:
    fmt.Println(i)
    i++
    
    if i < 5 {
        goto Start
    }
    
    fmt.Println("ç»“æŸ")
}
```

### 2. goto ç”¨äºé”™è¯¯å¤„ç†

```go
package main

import (
    "fmt"
    "os"
)

func processFile(filename string) error {
    file, err := os.Open(filename)
    if err != nil {
        goto Error
    }
    defer file.Close()
    
    // å¤„ç†æ–‡ä»¶...
    
    return nil
    
Error:
    fmt.Println("å¤„ç†æ–‡ä»¶å‡ºé”™:", err)
    return err
}

func main() {
    processFile("test.txt")
}
```

### 3. goto çš„é™åˆ¶

```go
package main

func main() {
    // âŒ ä¸èƒ½è·³è¿‡å˜é‡å£°æ˜
    // goto Skip
    // x := 10
    // Skip:
    //     fmt.Println(x)
    
    // âŒ ä¸èƒ½è·³å…¥ä»£ç å—
    // goto Inner
    // {
    // Inner:
    //     fmt.Println("inner")
    // }
}
```

---

## defer å»¶è¿Ÿè¯­å¥

### 1. åŸºæœ¬ defer

```go
package main

import "fmt"

func main() {
    defer fmt.Println("1")
    defer fmt.Println("2")
    defer fmt.Println("3")
    
    fmt.Println("å¼€å§‹")
    // è¾“å‡ºï¼š
    // å¼€å§‹
    // 3
    // 2
    // 1
}
```

### 2. defer æ‰§è¡Œé¡ºåºï¼ˆLIFOï¼‰

```go
package main

import "fmt"

func main() {
    for i := 0; i < 5; i++ {
        defer fmt.Println(i)
    }
    // è¾“å‡ºï¼š4 3 2 1 0
}
```

### 3. defer å‚æ•°æ±‚å€¼

```go
package main

import "fmt"

func main() {
    x := 10
    
    // defer æ³¨å†Œæ—¶å°±è®¡ç®—å‚æ•°
    defer fmt.Println("defer x =", x)
    
    x = 20
    fmt.Println("x =", x)
    
    // è¾“å‡ºï¼š
    // x = 20
    // defer x = 10
}
```

### 4. defer ä¸é—­åŒ…

```go
package main

import "fmt"

func main() {
    x := 10
    
    // é—­åŒ…æ•è·å˜é‡å¼•ç”¨
    defer func() {
        fmt.Println("defer x =", x)
    }()
    
    x = 20
    fmt.Println("x =", x)
    
    // è¾“å‡ºï¼š
    // x = 20
    // defer x = 20
}
```

### 5. defer ç”¨äºèµ„æºæ¸…ç†

```go
package main

import (
    "fmt"
    "os"
)

func readFile(filename string) error {
    file, err := os.Open(filename)
    if err != nil {
        return err
    }
    defer file.Close()  // ç¡®ä¿æ–‡ä»¶å…³é—­
    
    // è¯»å–æ–‡ä»¶...
    
    return nil
}

func main() {
    if err := readFile("test.txt"); err != nil {
        fmt.Println("é”™è¯¯:", err)
    }
}
```

### 6. defer ä¸ panic/recover

```go
package main

import "fmt"

func safeDivide(a, b int) (result int) {
    defer func() {
        if r := recover(); r != nil {
            fmt.Println("æ•è· panic:", r)
            result = 0
        }
    }()
    
    return a / b
}

func main() {
    fmt.Println(safeDivide(10, 2))  // 5
    fmt.Println(safeDivide(10, 0))  // 0 (æ•è· panic)
}
```

---

## ä»£ç ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šä¹ä¹ä¹˜æ³•è¡¨

```go
package main

import "fmt"

func main() {
    for i := 1; i <= 9; i++ {
        for j := 1; j <= i; j++ {
            fmt.Printf("%d*%d=%d\t", j, i, i*j)
        }
        fmt.Println()
    }
}
```

### ç¤ºä¾‹ 2ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—

```go
package main

import "fmt"

func fibonacci(n int) {
    a, b := 0, 1
    for i := 0; i < n; i++ {
        fmt.Print(a, " ")
        a, b = b, a+b
    }
    fmt.Println()
}

func main() {
    fibonacci(10)  // 0 1 1 2 3 5 8 13 21 34
}
```

### ç¤ºä¾‹ 3ï¼šç´ æ•°åˆ¤æ–­

```go
package main

import "fmt"

func isPrime(n int) bool {
    if n <= 1 {
        return false
    }
    
    for i := 2; i*i <= n; i++ {
        if n%i == 0 {
            return false
        }
    }
    
    return true
}

func main() {
    // æ‰“å° 100 ä»¥å†…çš„ç´ æ•°
    for i := 2; i <= 100; i++ {
        if isPrime(i) {
            fmt.Print(i, " ")
        }
    }
    fmt.Println()
}
```

### ç¤ºä¾‹ 4ï¼šå†’æ³¡æ’åº

```go
package main

import "fmt"

func bubbleSort(arr []int) {
    n := len(arr)
    
    for i := 0; i < n-1; i++ {
        swapped := false
        
        for j := 0; j < n-i-1; j++ {
            if arr[j] > arr[j+1] {
                arr[j], arr[j+1] = arr[j+1], arr[j]
                swapped = true
            }
        }
        
        // å¦‚æœæ²¡æœ‰äº¤æ¢ï¼Œè¯´æ˜å·²ç»æœ‰åº
        if !swapped {
            break
        }
    }
}

func main() {
    arr := []int{64, 34, 25, 12, 22, 11, 90}
    fmt.Println("æ’åºå‰:", arr)
    
    bubbleSort(arr)
    fmt.Println("æ’åºå:", arr)
}
```

### ç¤ºä¾‹ 5ï¼šdefer å®ç°è®¡æ—¶å™¨

```go
package main

import (
    "fmt"
    "time"
)

func timer(name string) func() {
    start := time.Now()
    return func() {
        fmt.Printf("%s è€—æ—¶: %v\n", name, time.Since(start))
    }
}

func slowFunction() {
    defer timer("slowFunction")()
    
    time.Sleep(2 * time.Second)
    fmt.Println("æ‰§è¡Œå®Œæˆ")
}

func main() {
    slowFunction()
}
```

### ç¤ºä¾‹ 6ï¼šå¤šå±‚å¾ªç¯æ§åˆ¶

```go
package main

import "fmt"

func findTarget(matrix [][]int, target int) (int, int) {
OuterLoop:
    for i := 0; i < len(matrix); i++ {
        for j := 0; j < len(matrix[i]); j++ {
            if matrix[i][j] == target {
                return i, j
            }
            
            // å¦‚æœå½“å‰å€¼å¤§äºç›®æ ‡ï¼Œè·³è¿‡è¿™ä¸€è¡Œ
            if matrix[i][j] > target {
                continue OuterLoop
            }
        }
    }
    
    return -1, -1
}

func main() {
    matrix := [][]int{
        {1, 2, 3},
        {4, 5, 6},
        {7, 8, 9},
    }
    
    i, j := findTarget(matrix, 5)
    fmt.Printf("æ‰¾åˆ° 5 åœ¨ä½ç½® [%d][%d]\n", i, j)
}
```

---

## å¸¸è§é—®é¢˜

### 1. for-range çš„é™·é˜±

```go
package main

import "fmt"

func main() {
    // é™·é˜± 1ï¼šå€¼æ˜¯å‰¯æœ¬
    arr := []int{1, 2, 3}
    for _, v := range arr {
        v = v * 2  // ä¿®æ”¹çš„æ˜¯å‰¯æœ¬
    }
    fmt.Println(arr)  // [1 2 3] (æœªæ”¹å˜)
    
    // æ­£ç¡®åšæ³•ï¼šä½¿ç”¨ç´¢å¼•
    for i := range arr {
        arr[i] = arr[i] * 2
    }
    fmt.Println(arr)  // [2 4 6]
    
    // é™·é˜± 2ï¼šå¾ªç¯å˜é‡åœ°å€
    var ptrs []*int
    for _, v := range []int{1, 2, 3} {
        ptrs = append(ptrs, &v)  // âŒ éƒ½æŒ‡å‘åŒä¸€ä¸ªå˜é‡
    }
    for _, p := range ptrs {
        fmt.Print(*p, " ")  // 3 3 3
    }
    fmt.Println()
    
    // æ­£ç¡®åšæ³•
    ptrs = nil
    for _, v := range []int{1, 2, 3} {
        v := v  // åˆ›å»ºæ–°å˜é‡
        ptrs = append(ptrs, &v)
    }
    for _, p := range ptrs {
        fmt.Print(*p, " ")  // 1 2 3
    }
}
```

### 2. defer çš„é™·é˜±

```go
package main

import "fmt"

func main() {
    // é™·é˜± 1ï¼šdefer åœ¨å¾ªç¯ä¸­
    for i := 0; i < 5; i++ {
        defer fmt.Println(i)  // ä¼šç´¯ç§¯ 5 ä¸ª defer
    }
    // è¾“å‡ºï¼š4 3 2 1 0
    
    // é™·é˜± 2ï¼šdefer ä¸è¿”å›å€¼
    fmt.Println(test1())  // 1
    fmt.Println(test2())  // 2
}

func test1() int {
    x := 1
    defer func() {
        x++  // ä¿®æ”¹çš„æ˜¯å±€éƒ¨å˜é‡
    }()
    return x  // è¿”å› 1
}

func test2() (x int) {
    x = 1
    defer func() {
        x++  // ä¿®æ”¹çš„æ˜¯è¿”å›å€¼
    }()
    return x  // è¿”å› 2
}
```

### 3. switch çš„é™·é˜±

```go
package main

import "fmt"

func main() {
    // é™·é˜±ï¼šfallthrough åªèƒ½åœ¨ case æœ«å°¾
    x := 2
    switch x {
    case 1:
        fmt.Println("1")
    case 2:
        fmt.Println("2")
        if x == 2 {
            // fallthrough  // âŒ ç¼–è¯‘é”™è¯¯
        }
        fallthrough  // âœ… å¿…é¡»åœ¨æœ«å°¾
    case 3:
        fmt.Println("3")
    }
}
```

---

## é¢è¯•é¢˜

### 1. ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ

```go
package main

import "fmt"

func main() {
    defer fmt.Println("1")
    defer fmt.Println("2")
    fmt.Println("3")
    defer fmt.Println("4")
}
```

**ç­”æ¡ˆï¼š**
```
3
4
2
1
```

**è§£æï¼š** defer æŒ‰ LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰é¡ºåºæ‰§è¡Œ

### 2. ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ

```go
package main

import "fmt"

func main() {
    for i := 0; i < 3; i++ {
        defer func() {
            fmt.Println(i)
        }()
    }
}
```

**ç­”æ¡ˆï¼š**
```
3
3
3
```

**è§£æï¼š** é—­åŒ…æ•è·çš„æ˜¯å˜é‡å¼•ç”¨ï¼Œå¾ªç¯ç»“æŸå i = 3

**æ­£ç¡®åšæ³•ï¼š**
```go
for i := 0; i < 3; i++ {
    i := i  // åˆ›å»ºæ–°å˜é‡
    defer func() {
        fmt.Println(i)
    }()
}
// è¾“å‡ºï¼š2 1 0
```

### 3. ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ

```go
package main

import "fmt"

func test() (result int) {
    defer func() {
        result++
    }()
    return 0
}

func main() {
    fmt.Println(test())
}
```

**ç­”æ¡ˆï¼š** 1

**è§£æï¼š**
1. è¿”å›å€¼ result èµ‹å€¼ä¸º 0
2. æ‰§è¡Œ deferï¼Œresult++
3. è¿”å› result (1)

### 4. for-range éå† map çš„é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ

**ç­”æ¡ˆï¼š** éšæœºçš„ï¼Œä¸ä¿è¯é¡ºåº

```go
m := map[string]int{"a": 1, "b": 2, "c": 3}
for k, v := range m {
    fmt.Println(k, v)  // é¡ºåºä¸ç¡®å®š
}

// å¦‚éœ€æœ‰åºéå†ï¼Œå…ˆæ’åº key
keys := make([]string, 0, len(m))
for k := range m {
    keys = append(keys, k)
}
sort.Strings(keys)
for _, k := range keys {
    fmt.Println(k, m[k])
}
```

### 5. break å’Œ continue çš„åŒºåˆ«ï¼Ÿ

**ç­”æ¡ˆï¼š**

- **break**ï¼šè·³å‡ºæ•´ä¸ªå¾ªç¯
- **continue**ï¼šè·³è¿‡æœ¬æ¬¡å¾ªç¯ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡

```go
// break
for i := 0; i < 5; i++ {
    if i == 3 {
        break
    }
    fmt.Println(i)
}
// è¾“å‡ºï¼š0 1 2

// continue
for i := 0; i < 5; i++ {
    if i == 3 {
        continue
    }
    fmt.Println(i)
}
// è¾“å‡ºï¼š0 1 2 4
```

---

## æœ€ä½³å®è·µ

### 1. ä¼˜å…ˆä½¿ç”¨ for-range

```go
// âœ… æ¨è
for i, v := range slice {
    fmt.Println(i, v)
}

// âŒ ä¸æ¨è
for i := 0; i < len(slice); i++ {
    fmt.Println(i, slice[i])
}
```

### 2. ä½¿ç”¨ defer æ¸…ç†èµ„æº

```go
// âœ… æ¨è
func readFile(filename string) error {
    file, err := os.Open(filename)
    if err != nil {
        return err
    }
    defer file.Close()
    
    // å¤„ç†æ–‡ä»¶...
    return nil
}

// âŒ ä¸æ¨èï¼ˆå®¹æ˜“å¿˜è®°å…³é—­ï¼‰
func readFile(filename string) error {
    file, err := os.Open(filename)
    if err != nil {
        return err
    }
    
    // å¤„ç†æ–‡ä»¶...
    
    file.Close()
    return nil
}
```

### 3. é¿å…åœ¨å¾ªç¯ä¸­ä½¿ç”¨ defer

```go
// âŒ ä¸æ¨èï¼ˆdefer ä¼šç´¯ç§¯ï¼‰
for _, file := range files {
    f, _ := os.Open(file)
    defer f.Close()  // å¾ªç¯ç»“æŸåæ‰æ‰§è¡Œ
}

// âœ… æ¨è
for _, file := range files {
    func() {
        f, _ := os.Open(file)
        defer f.Close()  // æ¯æ¬¡è¿­ä»£éƒ½æ‰§è¡Œ
        // å¤„ç†æ–‡ä»¶...
    }()
}
```

### 4. ä½¿ç”¨æ ‡ç­¾è·³å‡ºå¤šå±‚å¾ªç¯

```go
// âœ… æ¨è
OuterLoop:
for i := 0; i < 10; i++ {
    for j := 0; j < 10; j++ {
        if found {
            break OuterLoop
        }
    }
}

// âŒ ä¸æ¨èï¼ˆéœ€è¦é¢å¤–çš„æ ‡å¿—å˜é‡ï¼‰
found := false
for i := 0; i < 10; i++ {
    for j := 0; j < 10; j++ {
        if condition {
            found = true
            break
        }
    }
    if found {
        break
    }
}
```

### 5. ä½¿ç”¨ switch ä»£æ›¿å¤šä¸ª if-else

```go
// âœ… æ¨è
switch {
case score >= 90:
    grade = "A"
case score >= 80:
    grade = "B"
case score >= 60:
    grade = "C"
default:
    grade = "D"
}

// âŒ ä¸æ¨è
if score >= 90 {
    grade = "A"
} else if score >= 80 {
    grade = "B"
} else if score >= 60 {
    grade = "C"
} else {
    grade = "D"
}
```

---

## å‚è€ƒèµ„æ–™

- [x] [Go å®˜æ–¹æ–‡æ¡£ - Control structures](https://go.dev/ref/spec#Control_structures)
- [x] [Effective Go - Control structures](https://go.dev/doc/effective_go#control-structures)
- [x] [Go by Example - If/Else](https://gobyexample.com/if-else)
- [x] [Go by Example - Switch](https://gobyexample.com/switch)
- [x] [Go by Example - For](https://gobyexample.com/for)
- [x] [Go by Example - Defer](https://gobyexample.com/defer)
