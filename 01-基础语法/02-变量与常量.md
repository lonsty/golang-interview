# 02-å˜é‡ä¸å¸¸é‡

[â† è¿”å›æœ¬ç« ç›®å½•](./README.md) | [â† è¿”å›æ€»ç›®å½•](../README.md)

---

## ğŸ“‹ ç›®å½•

- [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
- [å˜é‡å£°æ˜](#å˜é‡å£°æ˜)
- [å¸¸é‡å£°æ˜](#å¸¸é‡å£°æ˜)
- [iota æšä¸¾](#iota-æšä¸¾)
- [ä½œç”¨åŸŸ](#ä½œç”¨åŸŸ)
- [ä»£ç ç¤ºä¾‹](#ä»£ç ç¤ºä¾‹)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [é¢è¯•é¢˜](#é¢è¯•é¢˜)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å‚è€ƒèµ„æ–™](#å‚è€ƒèµ„æ–™)

---

## æ ¸å¿ƒæ¦‚å¿µ

### å˜é‡ vs å¸¸é‡

```
å˜é‡ï¼ˆVariableï¼‰ï¼š
- å€¼å¯ä»¥æ”¹å˜
- è¿è¡Œæ—¶ç¡®å®š
- å­˜å‚¨åœ¨å†…å­˜ä¸­

å¸¸é‡ï¼ˆConstantï¼‰ï¼š
- å€¼ä¸å¯æ”¹å˜
- ç¼–è¯‘æ—¶ç¡®å®š
- å¯èƒ½è¢«ç¼–è¯‘å™¨ä¼˜åŒ–
```

### Go å˜é‡ç‰¹ç‚¹

1. **é™æ€ç±»å‹**ï¼šå˜é‡ç±»å‹åœ¨ç¼–è¯‘æ—¶ç¡®å®š
2. **é›¶å€¼åˆå§‹åŒ–**ï¼šæœªåˆå§‹åŒ–çš„å˜é‡æœ‰é»˜è®¤é›¶å€¼
3. **ç±»å‹æ¨å¯¼**ï¼šä½¿ç”¨ `:=` è‡ªåŠ¨æ¨å¯¼ç±»å‹
4. **çŸ­å˜é‡å£°æ˜**ï¼šåªèƒ½åœ¨å‡½æ•°å†…ä½¿ç”¨

---

## å˜é‡å£°æ˜

### 1. æ ‡å‡†å£°æ˜

```go
package main

import "fmt"

func main() {
    // æ–¹å¼ 1ï¼švar å…³é”®å­— + ç±»å‹
    var name string
    var age int
    var height float64
    
    fmt.Println(name, age, height)  // "" 0 0
    
    // æ–¹å¼ 2ï¼švar å…³é”®å­— + ç±»å‹ + åˆå§‹å€¼
    var name2 string = "Alice"
    var age2 int = 25
    
    fmt.Println(name2, age2)
    
    // æ–¹å¼ 3ï¼švar å…³é”®å­— + åˆå§‹å€¼ï¼ˆç±»å‹æ¨å¯¼ï¼‰
    var name3 = "Bob"
    var age3 = 30
    
    fmt.Println(name3, age3)
    
    // æ–¹å¼ 4ï¼šçŸ­å˜é‡å£°æ˜ï¼ˆæœ€å¸¸ç”¨ï¼‰
    name4 := "Charlie"
    age4 := 35
    
    fmt.Println(name4, age4)
}
```

### 2. æ‰¹é‡å£°æ˜

```go
package main

import "fmt"

func main() {
    // åŒç±»å‹æ‰¹é‡å£°æ˜
    var a, b, c int
    fmt.Println(a, b, c)  // 0 0 0
    
    // ä¸åŒç±»å‹æ‰¹é‡å£°æ˜
    var (
        name   string
        age    int
        height float64
    )
    fmt.Println(name, age, height)
    
    // æ‰¹é‡åˆå§‹åŒ–
    var x, y, z = 1, 2, 3
    fmt.Println(x, y, z)
    
    // çŸ­å˜é‡æ‰¹é‡å£°æ˜
    m, n := 10, 20
    fmt.Println(m, n)
}
```

### 3. åŒ…çº§åˆ«å˜é‡

```go
package main

import "fmt"

// åŒ…çº§åˆ«å˜é‡ï¼ˆå…¨å±€å˜é‡ï¼‰
var (
    AppName    = "MyApp"
    Version    = "1.0.0"
    MaxRetries = 3
)

// ä¸èƒ½ä½¿ç”¨çŸ­å˜é‡å£°æ˜
// AppName := "MyApp"  // ç¼–è¯‘é”™è¯¯

func main() {
    fmt.Println(AppName, Version, MaxRetries)
}
```

### 4. åŒ¿åå˜é‡

```go
package main

import "fmt"

func getNameAndAge() (string, int) {
    return "Alice", 25
}

func main() {
    // ä½¿ç”¨ _ å¿½ç•¥ä¸éœ€è¦çš„è¿”å›å€¼
    name, _ := getNameAndAge()
    fmt.Println(name)
    
    // å¿½ç•¥æ‰€æœ‰è¿”å›å€¼
    _, _ = getNameAndAge()
}
```

### 5. å˜é‡èµ‹å€¼

```go
package main

import "fmt"

func main() {
    // å•ä¸ªèµ‹å€¼
    var x int
    x = 10
    fmt.Println(x)
    
    // å¤šé‡èµ‹å€¼
    var a, b int
    a, b = 1, 2
    fmt.Println(a, b)
    
    // äº¤æ¢å˜é‡
    a, b = b, a
    fmt.Println(a, b)  // 2 1
    
    // é“¾å¼èµ‹å€¼ï¼ˆä¸æ”¯æŒï¼‰
    // var c, d int
    // c = d = 10  // ç¼–è¯‘é”™è¯¯
}
```

---

## å¸¸é‡å£°æ˜

### 1. åŸºæœ¬å¸¸é‡

```go
package main

import "fmt"

func main() {
    // å•ä¸ªå¸¸é‡
    const Pi = 3.14159
    const AppName = "MyApp"
    
    fmt.Println(Pi, AppName)
    
    // å¸¸é‡ä¸èƒ½ä¿®æ”¹
    // Pi = 3.14  // ç¼–è¯‘é”™è¯¯
    
    // æ‰¹é‡å¸¸é‡
    const (
        StatusOK    = 200
        StatusError = 500
    )
    
    fmt.Println(StatusOK, StatusError)
}
```

### 2. ç±»å‹åŒ–å¸¸é‡ vs æ— ç±»å‹å¸¸é‡

```go
package main

import "fmt"

func main() {
    // æ— ç±»å‹å¸¸é‡ï¼ˆæ›´çµæ´»ï¼‰
    const a = 10
    var i int = a
    var f float64 = a
    var c complex128 = a
    
    fmt.Println(i, f, c)
    
    // ç±»å‹åŒ–å¸¸é‡ï¼ˆä¸¥æ ¼ç±»å‹æ£€æŸ¥ï¼‰
    const b int = 10
    var j int = b
    // var g float64 = b  // ç¼–è¯‘é”™è¯¯
    
    fmt.Println(j)
}
```

### 3. å¸¸é‡è¡¨è¾¾å¼

```go
package main

import "fmt"

const (
    // å¸¸é‡å¯ä»¥æ˜¯è¡¨è¾¾å¼
    KB = 1024
    MB = KB * 1024
    GB = MB * 1024
    TB = GB * 1024
)

const (
    // å¸¸é‡å¯ä»¥ä½¿ç”¨å†…ç½®å‡½æ•°
    s   = "hello"
    len = len(s)  // 5
)

func main() {
    fmt.Println(KB, MB, GB, TB)
    fmt.Println(s, len)
}
```

---

## iota æšä¸¾

### 1. iota åŸºç¡€

```go
package main

import "fmt"

func main() {
    // iota ä» 0 å¼€å§‹è‡ªå¢
    const (
        Sunday = iota     // 0
        Monday            // 1
        Tuesday           // 2
        Wednesday         // 3
        Thursday          // 4
        Friday            // 5
        Saturday          // 6
    )
    
    fmt.Println(Sunday, Monday, Tuesday)
}
```

### 2. iota è·³è¿‡å€¼

```go
package main

import "fmt"

func main() {
    const (
        a = iota  // 0
        _         // 1 (è·³è¿‡)
        b         // 2
        _         // 3 (è·³è¿‡)
        c         // 4
    )
    
    fmt.Println(a, b, c)  // 0 2 4
}
```

### 3. iota è¡¨è¾¾å¼

```go
package main

import "fmt"

func main() {
    // ä½è¿ç®—
    const (
        FlagNone  = 0
        FlagRead  = 1 << iota  // 1 << 1 = 2
        FlagWrite              // 1 << 2 = 4
        FlagExec               // 1 << 3 = 8
    )
    
    fmt.Printf("Read: %b, Write: %b, Exec: %b\n", FlagRead, FlagWrite, FlagExec)
    
    // æ•°é‡çº§
    const (
        _  = iota             // 0
        KB = 1 << (10 * iota) // 1 << 10 = 1024
        MB                    // 1 << 20 = 1048576
        GB                    // 1 << 30 = 1073741824
        TB                    // 1 << 40
    )
    
    fmt.Println(KB, MB, GB, TB)
}
```

### 4. iota ä¸­æ–­å’Œæ¢å¤

```go
package main

import "fmt"

func main() {
    const (
        a = iota  // 0
        b         // 1
        c = 100   // 100 (ä¸­æ–­ iota)
        d         // 100 (ç»§æ‰¿ä¸Šä¸€ä¸ªå€¼)
        e = iota  // 4 (æ¢å¤ iota)
        f         // 5
    )
    
    fmt.Println(a, b, c, d, e, f)  // 0 1 100 100 4 5
}
```

### 5. å¤šä¸ª iota

```go
package main

import "fmt"

func main() {
    const (
        a, b = iota, iota + 10  // 0, 10
        c, d                    // 1, 11
        e, f                    // 2, 12
    )
    
    fmt.Println(a, b, c, d, e, f)  // 0 10 1 11 2 12
}
```

---

## ä½œç”¨åŸŸ

### 1. åŒ…çº§åˆ«ä½œç”¨åŸŸ

```go
package main

import "fmt"

// åŒ…çº§åˆ«å˜é‡ï¼ˆå…¨å±€ï¼‰
var globalVar = "global"

func main() {
    fmt.Println(globalVar)
    test()
}

func test() {
    fmt.Println(globalVar)  // å¯ä»¥è®¿é—®
}
```

### 2. å‡½æ•°ä½œç”¨åŸŸ

```go
package main

import "fmt"

func main() {
    // å‡½æ•°çº§åˆ«å˜é‡
    var localVar = "local"
    fmt.Println(localVar)
    
    // test()  // æ— æ³•è®¿é—® localVar
}

func test() {
    // fmt.Println(localVar)  // ç¼–è¯‘é”™è¯¯
}
```

### 3. å—çº§ä½œç”¨åŸŸ

```go
package main

import "fmt"

func main() {
    x := 10
    fmt.Println("å¤–éƒ¨ x:", x)
    
    {
        // å†…éƒ¨å—
        x := 20  // æ–°å˜é‡ï¼Œé®è”½å¤–éƒ¨ x
        fmt.Println("å†…éƒ¨ x:", x)
    }
    
    fmt.Println("å¤–éƒ¨ x:", x)  // 10
}
```

### 4. if/for ä½œç”¨åŸŸ

```go
package main

import "fmt"

func main() {
    // if è¯­å¥ä½œç”¨åŸŸ
    if x := 10; x > 5 {
        fmt.Println("x:", x)
    }
    // fmt.Println(x)  // ç¼–è¯‘é”™è¯¯ï¼Œx è¶…å‡ºä½œç”¨åŸŸ
    
    // for è¯­å¥ä½œç”¨åŸŸ
    for i := 0; i < 3; i++ {
        fmt.Println("i:", i)
    }
    // fmt.Println(i)  // ç¼–è¯‘é”™è¯¯ï¼Œi è¶…å‡ºä½œç”¨åŸŸ
}
```

### 5. å˜é‡é®è”½

```go
package main

import "fmt"

var x = "global"

func main() {
    fmt.Println("1:", x)  // global
    
    x := "local"
    fmt.Println("2:", x)  // local
    
    {
        x := "block"
        fmt.Println("3:", x)  // block
    }
    
    fmt.Println("4:", x)  // local
}
```

---

## ä»£ç ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šå˜é‡å£°æ˜çš„å„ç§æ–¹å¼

```go
package main

import "fmt"

// åŒ…çº§åˆ«å˜é‡
var (
    AppName = "MyApp"
    Version = "1.0.0"
)

func main() {
    // 1. æ ‡å‡†å£°æ˜
    var name string = "Alice"
    
    // 2. ç±»å‹æ¨å¯¼
    var age = 25
    
    // 3. çŸ­å˜é‡å£°æ˜
    height := 1.75
    
    // 4. æ‰¹é‡å£°æ˜
    var (
        city    = "Beijing"
        country = "China"
    )
    
    // 5. å¤šé‡èµ‹å€¼
    x, y := 10, 20
    
    fmt.Println(name, age, height, city, country, x, y)
}
```

### ç¤ºä¾‹ 2ï¼šå¸¸é‡å’Œ iota çš„ä½¿ç”¨

```go
package main

import "fmt"

// å®šä¹‰æ˜ŸæœŸæšä¸¾
const (
    Sunday = iota
    Monday
    Tuesday
    Wednesday
    Thursday
    Friday
    Saturday
)

// å®šä¹‰æ–‡ä»¶æƒé™
const (
    ReadPermission   = 1 << iota  // 1
    WritePermission                // 2
    ExecutePermission              // 4
)

// å®šä¹‰å­˜å‚¨å•ä½
const (
    _  = iota
    KB = 1 << (10 * iota)
    MB
    GB
    TB
)

func main() {
    fmt.Println("ä»Šå¤©æ˜¯:", Tuesday)
    
    // ç»„åˆæƒé™
    permission := ReadPermission | WritePermission
    fmt.Printf("æƒé™: %b\n", permission)
    
    fmt.Println("1 GB =", GB, "bytes")
}
```

### ç¤ºä¾‹ 3ï¼šä½œç”¨åŸŸç¤ºä¾‹

```go
package main

import "fmt"

var global = "å…¨å±€å˜é‡"

func main() {
    local := "å±€éƒ¨å˜é‡"
    
    fmt.Println("1:", global)  // å…¨å±€å˜é‡
    fmt.Println("2:", local)   // å±€éƒ¨å˜é‡
    
    // å—ä½œç”¨åŸŸ
    {
        block := "å—å˜é‡"
        fmt.Println("3:", block)
        fmt.Println("4:", global)  // å¯ä»¥è®¿é—®å…¨å±€å˜é‡
        fmt.Println("5:", local)   // å¯ä»¥è®¿é—®å±€éƒ¨å˜é‡
    }
    
    // fmt.Println(block)  // ç¼–è¯‘é”™è¯¯
    
    // if ä½œç”¨åŸŸ
    if x := 10; x > 5 {
        fmt.Println("6: x =", x)
    }
    
    // for ä½œç”¨åŸŸ
    for i := 0; i < 3; i++ {
        fmt.Println("7: i =", i)
    }
}
```

---

## å¸¸è§é—®é¢˜

### 1. := å’Œ var çš„åŒºåˆ«ï¼Ÿ

```go
// := åªèƒ½åœ¨å‡½æ•°å†…ä½¿ç”¨
func main() {
    x := 10  // âœ…
}

// var å¯ä»¥åœ¨åŒ…çº§åˆ«ä½¿ç”¨
var y = 20  // âœ…

// := ä¸èƒ½åœ¨åŒ…çº§åˆ«ä½¿ç”¨
// z := 30  // âŒ ç¼–è¯‘é”™è¯¯
```

### 2. çŸ­å˜é‡å£°æ˜çš„é™·é˜±

```go
package main

import "fmt"

func main() {
    x := 10
    fmt.Println(x)
    
    // è¿™ä¸æ˜¯é‡æ–°å£°æ˜ï¼Œè€Œæ˜¯èµ‹å€¼
    x := 20  // ç¼–è¯‘é”™è¯¯ï¼šno new variables on left side of :=
    
    // æ­£ç¡®åšæ³•
    x = 20   // èµ‹å€¼
    
    // æˆ–è€…è‡³å°‘æœ‰ä¸€ä¸ªæ–°å˜é‡
    x, y := 30, 40  // âœ… y æ˜¯æ–°å˜é‡
}
```

### 3. å¸¸é‡å¯ä»¥æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ

```go
// å¸¸é‡åªèƒ½æ˜¯åŸºæœ¬ç±»å‹
const (
    a = 10           // âœ… æ•°å€¼
    b = "hello"      // âœ… å­—ç¬¦ä¸²
    c = true         // âœ… å¸ƒå°”
    d = 3.14         // âœ… æµ®ç‚¹æ•°
)

// ä¸èƒ½æ˜¯å¤åˆç±»å‹
// const e = []int{1, 2, 3}     // âŒ åˆ‡ç‰‡
// const f = map[string]int{}   // âŒ map
// const g = struct{}{}         // âŒ ç»“æ„ä½“
```

### 4. å˜é‡çš„é›¶å€¼æ˜¯ä»€ä¹ˆï¼Ÿ

```go
package main

import "fmt"

func main() {
    var i int
    var f float64
    var b bool
    var s string
    var p *int
    
    fmt.Printf("int:     %v\n", i)  // 0
    fmt.Printf("float64: %v\n", f)  // 0
    fmt.Printf("bool:    %v\n", b)  // false
    fmt.Printf("string:  %q\n", s)  // ""
    fmt.Printf("pointer: %v\n", p)  // <nil>
}
```

---

## é¢è¯•é¢˜

### 1. ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ

```go
package main

import "fmt"

func main() {
    const (
        a = iota
        b
        c = 100
        d
        e = iota
        f
    )
    fmt.Println(a, b, c, d, e, f)
}
```

**ç­”æ¡ˆï¼š**

```
0 1 100 100 4 5
```

**è§£æï¼š**
- `a = iota` â†’ 0
- `b` â†’ 1ï¼ˆç»§æ‰¿ iotaï¼‰
- `c = 100` â†’ 100ï¼ˆä¸­æ–­ iotaï¼‰
- `d` â†’ 100ï¼ˆç»§æ‰¿ä¸Šä¸€ä¸ªå€¼ï¼‰
- `e = iota` â†’ 4ï¼ˆæ¢å¤ iotaï¼Œå½“å‰è¡Œå·ï¼‰
- `f` â†’ 5ï¼ˆç»§æ‰¿ iotaï¼‰

### 2. ä¸‹é¢ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ

```go
package main

func main() {
    var x int
    x := 10
}
```

**ç­”æ¡ˆï¼š**

ç¼–è¯‘é”™è¯¯ï¼š`no new variables on left side of :=`

**è§£æï¼š**
- `x` å·²ç»å£°æ˜è¿‡äº†
- `:=` è¦æ±‚è‡³å°‘æœ‰ä¸€ä¸ªæ–°å˜é‡

**æ­£ç¡®åšæ³•ï¼š**
```go
var x int
x = 10  // ä½¿ç”¨èµ‹å€¼
```

### 3. ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ

```go
package main

import "fmt"

var x = 100

func main() {
    fmt.Println(x)
    x := 200
    fmt.Println(x)
}
```

**ç­”æ¡ˆï¼š**

```
100
200
```

**è§£æï¼š**
- ç¬¬ä¸€ä¸ª `x` æ˜¯åŒ…çº§åˆ«å˜é‡ï¼ˆ100ï¼‰
- `x := 200` å£°æ˜äº†æ–°çš„å±€éƒ¨å˜é‡ï¼Œé®è”½äº†å…¨å±€å˜é‡

### 4. å¸¸é‡å’Œå˜é‡çš„åŒºåˆ«ï¼Ÿ

**ç­”æ¡ˆï¼š**

| ç‰¹æ€§ | å¸¸é‡ | å˜é‡ |
|------|------|------|
| å€¼ | ä¸å¯å˜ | å¯å˜ |
| ç¡®å®šæ—¶é—´ | ç¼–è¯‘æ—¶ | è¿è¡Œæ—¶ |
| ç±»å‹ | åªèƒ½æ˜¯åŸºæœ¬ç±»å‹ | ä»»æ„ç±»å‹ |
| å†…å­˜ | å¯èƒ½è¢«ä¼˜åŒ– | åˆ†é…å†…å­˜ |
| å…³é”®å­— | const | var |

### 5. iota çš„ä½¿ç”¨åœºæ™¯ï¼Ÿ

**ç­”æ¡ˆï¼š**

1. **æšä¸¾å€¼**
```go
const (
    StatusOK = iota
    StatusError
    StatusTimeout
)
```

2. **ä½æ ‡å¿—**
```go
const (
    FlagRead  = 1 << iota
    FlagWrite
    FlagExec
)
```

3. **æ•°é‡çº§**
```go
const (
    _  = iota
    KB = 1 << (10 * iota)
    MB
    GB
)
```

---

## æœ€ä½³å®è·µ

### 1. ä¼˜å…ˆä½¿ç”¨çŸ­å˜é‡å£°æ˜

```go
// âœ… æ¨è
name := "Alice"
age := 25

// âŒ ä¸æ¨èï¼ˆå†—ä½™ï¼‰
var name string = "Alice"
var age int = 25
```

### 2. ä½¿ç”¨ var å£°æ˜é›¶å€¼å˜é‡

```go
// âœ… æ¨è
var count int  // æ˜ç¡®è¡¨ç¤ºé›¶å€¼

// âŒ ä¸æ¨è
count := 0  // ä¸å¤Ÿæ¸…æ™°
```

### 3. æ‰¹é‡å£°æ˜ç›¸å…³å˜é‡

```go
// âœ… æ¨è
var (
    host = "localhost"
    port = 8080
    timeout = 30
)

// âŒ ä¸æ¨è
var host = "localhost"
var port = 8080
var timeout = 30
```

### 4. ä½¿ç”¨å¸¸é‡ä»£æ›¿é­”æ³•æ•°å­—

```go
// âœ… æ¨è
const (
    MaxRetries = 3
    Timeout    = 30
)

func connect() {
    for i := 0; i < MaxRetries; i++ {
        // ...
    }
}

// âŒ ä¸æ¨è
func connect() {
    for i := 0; i < 3; i++ {  // é­”æ³•æ•°å­—
        // ...
    }
}
```

### 5. ä½¿ç”¨ iota å®šä¹‰æšä¸¾

```go
// âœ… æ¨è
const (
    StatusOK = iota
    StatusError
    StatusTimeout
)

// âŒ ä¸æ¨è
const (
    StatusOK      = 0
    StatusError   = 1
    StatusTimeout = 2
)
```

### 6. é¿å…å˜é‡é®è”½

```go
// âŒ å®¹æ˜“å‡ºé”™
var err error
if err := doSomething(); err != nil {  // é®è”½å¤–éƒ¨ err
    return err
}
// è¿™é‡Œçš„ err ä»ç„¶æ˜¯ nil

// âœ… æ¨è
var err error
err = doSomething()
if err != nil {
    return err
}
```

---

## å‚è€ƒèµ„æ–™

- [x] [Go å®˜æ–¹æ–‡æ¡£ - Variables](https://go.dev/ref/spec#Variables)
- [x] [Go å®˜æ–¹æ–‡æ¡£ - Constants](https://go.dev/ref/spec#Constants)
- [x] [Go å®˜æ–¹æ–‡æ¡£ - Iota](https://go.dev/ref/spec#Iota)
- [x] [Effective Go - Variables](https://go.dev/doc/effective_go#variables)
- [x] [Go by Example - Variables](https://gobyexample.com/variables)
- [x] [Go by Example - Constants](https://gobyexample.com/constants)

---

**ä¸‹ä¸€èŠ‚ï¼š** [03-è¿ç®—ç¬¦](./03-è¿ç®—ç¬¦.md)
